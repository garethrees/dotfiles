###########################
#  Configuration
###########################

# improve colors
set -g default-terminal "screen-256color"

# increase scroll-back history
set -g history-limit 5000

# Allow switching panes with the mouse
set-option -g mouse-select-pane on

# use vim key bindings
setw -g mode-keys vi

# start window numbers at 1 to match keyboard order with tmux window order
set -g base-index 1
set-window-option -g pane-base-index 1

# renumber windows sequentially after closing any of them
set -g renumber-windows on

# Unicode
setw -g utf8 on

# Copy-paste integration
set-option -g default-command "reattach-to-user-namespace -l bash"

###########################
#  Key Bindings
###########################

# Set prefix:  act like GNU screen
#unbind C-b
#set -g prefix C-a

# map Vi movement keys as pane movement keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# and use C-h and C-l to cycle thru panes
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# resize panes using PREFIX H, J, K, L
bind H resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind L resize-pane -R 5

# switch to last pane
bind-key C-a last-pane
#bind-key C-a last-window

# Clear the window
bind-key -r C-k send-keys -R \; clear-history \; send-keys "Enter"

# Go to beginning of line
bind a send-prefix

# use PREFIX | to split window horizontally and PREFIX - to split vertically
bind | split-window -h
bind - split-window -v

# Setup 'v' to begin selection as in Vim
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Update default binding of `Enter` to also use copy-pipe
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

# Bind ']' to use pbpaste
bind ] run "reattach-to-user-namespace pbpaste | tmux load-buffer - && tmux paste-buffer"

###########################
#  Status Bar
###########################

# enable UTF-8 support in status bar
set -g status-utf8 on

# left-align the status bar
set -g status-justify left

# remove administrative debris (session name, hostname, time) in status bar
set -g status-left ''
# Show the session name at the right of the status bar
set -g status-right '[#S]'

###########################
# Colors
###########################

# soften status bar colour from harsh green to light grey
set -g status-bg '#3e4e4e'
set -g status-fg '#aaaaaa'

# highlight current window
set-window-option -g window-status-current-fg black
set-window-option -g window-status-current-bg green
